window.account;
window.globalCart;
var menuKeys = [];
var menu = [];

var loadLocalCartInfo = function(){
  //Cookies.remove("globalCart");
  window.globalCart = Cookies.getJSON("globalCart");

  if(window.globalCart == undefined){
    Cookies.set("globalCart", {totalItems: 0, totalPrice: 0.0, items: []});
    window.globalCart = Cookies.getJSON("globalCart");
  }

  var cartButton = document.querySelector("#cart-btn");
  cartButton.innerHTML = "<h1>Cart (" + window.globalCart["totalItems"] + ")</h1>";
}

var loadMenuFromServer = function(){
  $.get("http://localhost:3000/menu", function(response) {
    var menuItems = response;
    for (var i = 0; i < menuItems.length; i++) {
      menuKeys.push(menuItems[i]["_id"]);
      menu.push({ name: menuItems[i]["name"],
                  price: menuItems[i]["price"],
                  photo: menuItems[i]["photo"]});
    }
  });
}

// Script for loading the account from the server
var loadAccountFromServer = function(){
  var userCredentials = Cookies.getJSON("userCredentials");

  if(userCredentials !== undefined){
    return $.get("http://localhost:3000/account/info?" + $.param(userCredentials))
    .then(function(accountPage){
      window.account = Cookies.getJSON("account");
      $("#account-btn").html("<h1>Hello, " + window.account.firstName + "!</h1>");
      return window.account;
    });
  }
} // End of script for loading the account from the server
